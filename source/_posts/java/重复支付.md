---
title: 重复支付
copyright: true
date: 2019-07-31 10:59:41
categories:
    - java
tags:
    - java
---
关于重复支付的解决方案。

<!-- more -->

(1) 系统集成了多个支付平台

由于网络延迟或者抓包等原因，可能导致重复支付。

(2) 虽然可以通过设置标志减少延迟的时间，降低重复的概率，但是仍然要考虑重复支付的情况

(3) 解决的方法是所有支付成功入队后

如果订单已支付，则对后续的支付执行原路径退款。这个模式认为重复支付一定会发生(因此不用考虑针对复杂网络延迟的开发模型)，重复支付发生后原路径退回即可。